<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BurnPool - Sacrifice fuels creation</title>
    <style>
        :root {
            --pixel-size: 2px;
            --bg-color: #0a0a121a;
            --panel-bg: rgba(26, 26, 42, 0.356);
            --accent-1: #ff3366;
            --accent-2: #3366ff;
            --text-color: #e0e0f0;
            --border-color: #33334d;
            --success-color: #33cc66;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            line-height: 1.4;
            background-image: url('s.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .container {
            width: 100%;
            max-width: 1000px;
        }
        
        /* Overlay for readability */
        .content-overlay {
            background: rgba(10, 10, 18, 0.7);
            padding: 20px;
            border-radius: 8px;
        }
        
        /* Pixel Header */
        .pixel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .logo-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-img {
            width: 100px;
            height: 80px;
            image-rendering: pixelated;
        }
        
        .title-section h1 {
            font-size: 28px;
            font-weight: bold;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }
        
        .title-section p {
            font-size: 14px;
            color: #a0a0cc;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .pixel-button {
            background: var(--accent-1);
            color: white;
            border: none;
            padding: 10px 20px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px;
        }
        
        .pixel-button:hover {
            background: #ff4477;
        }
        
        .pixel-button:active {
            transform: translateY(1px);
        }
        
        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        /* Pixel Panel */
        .pixel-panel {
            background: var(--panel-bg);
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .panel-header h2 {
            font-size: 18px;
            color: var(--accent-2);
        }
        
        .status-value {
            font-weight: bold;
            color: var(--accent-1);
        }
        
        /* Status Grid */
        .status-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
        }
        
        .status-label {
            font-size: 12px;
            color: #a0a0cc;
            margin-bottom: 5px;
        }
        
        .status-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        /* Timer */
        .timer-container {
            text-align: center;
            margin: 25px 0;
        }
        
        .timer {
            font-size: 32px;
            font-weight: bold;
            color: var(--accent-1);
            margin-bottom: 5px;
            letter-spacing: 2px;
        }
        
        .timer-label {
            font-size: 14px;
            color: var(--accent-2);
        }
        
        /* Action Button */
        .action-section {
            text-align: center;
            margin: 30px 0 20px;
        }
        
        .action-button {
            background: var(--accent-1);
            color: white;
            border: none;
            padding: 15px 40px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            max-width: 300px;
            border-radius: 4px;
        }
        
        .action-button:hover {
            background: #ff4477;
        }
        
        .action-button:active {
            transform: translateY(1px);
        }
        
        .action-button:disabled {
            background: #666699;
            cursor: not-allowed;
        }
        
        /* Result Sequence */
        .result-sequence {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            display: none;
            border-radius: 4px;
        }
        
        .system-message {
            color: var(--accent-1);
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        /* Live Feed */
        .feed-container {
            height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            padding: 15px;
            font-size: 13px;
            border-radius: 4px;
        }
        
        .feed-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
        }
        
        .feed-time {
            color: var(--accent-2);
            min-width: 70px;
            margin-right: 10px;
        }
        
        .feed-message {
            flex: 1;
        }
        
        /* How It Works */
        .how-it-works {
            background: var(--panel-bg);
            border: 2px solid var(--border-color);
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
        }
        
        .how-it-works h2 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            color: var(--accent-2);
            font-size: 18px;
        }
        
        .how-it-works p {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .contract-link {
            display: inline-block;
            color: var(--accent-1);
            text-decoration: none;
            font-weight: bold;
            margin-top: 10px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: var(--panel-bg);
            border: 2px solid var(--border-color);
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-header h2 {
            color: var(--accent-2);
        }
        
        .modal-body {
            margin-bottom: 20px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Wallet Options */
        .wallet-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .wallet-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px;
        }
        
        .wallet-option:hover {
            border-color: var(--accent-2);
            background: rgba(51, 102, 255, 0.1);
        }
        
        .wallet-icon {
            width: 30px;
            height: 30px;
            background: var(--accent-1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            border-radius: 4px;
        }
        
        .wallet-name {
            font-weight: bold;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .pixel-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .header-controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content-overlay">
            <!-- Header -->
            <header class="pixel-header">
                <div class="logo-title">
                    <img src="BurnPool (2).png" alt="BurnPool Logo" class="logo-img">
                    <div class="title-section">
                        <h1>BurnPool</h1>
                        <p>Sacrifice fuels creation.</p>
                    </div>
                </div>
                <div class="header-controls">
                    <a href="https://x.com/BurnPoolSOL" class="pixel-button" target="_blank">Twitter</a>
                    <button class="pixel-button" id="connectWallet">Connect Wallet</button>
                </div>
            </header>
            
            <!-- Main Content -->
            <div class="main-grid">
                <!-- Pool Interface -->
                <section class="pixel-panel">
                    <div class="panel-header">
                        <h2>Current Round</h2>
                        <div class="status-value" id="roundStatus">ACTIVE</div>
                    </div>
                    
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-label">Round #</div>
                            <div class="status-value" id="roundNumber">042</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Entries</div>
                            <div class="status-value" id="entriesCount">178</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Jackpot</div>
                            <div class="status-value" id="jackpotAmount">42.3 SOL</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Ticket Price</div>
                            <div class="status-value" id="ticketPrice">0.14 SOL</div>
                        </div>
                    </div>
                    
                    <div class="timer-container">
                        <div class="timer" id="timerDisplay">03:12</div>
                        <div class="timer-label">Round ends in:</div>
                    </div>
                    
                    <div class="action-section">
                        <button class="action-button" id="enterPoolBtn" disabled>Enter BurnPool</button>
                    </div>
                    
                    <div class="result-sequence" id="resultSequence">
                        <div class="system-message">[ROUND COMPLETE]</div>
                        <div class="system-message">3 wallets rewarded.</div>
                        <div class="system-message">18% of jackpot burned.</div>
                        <div class="system-message">New round initializing...</div>
                    </div>
                </section>
                
                <!-- Live Feed -->
                <section class="pixel-panel">
                    <div class="panel-header">
                        <h2>Live Feed</h2>
                        <div class="status-value">ACTIVE</div>
                    </div>
                    <div class="feed-container" id="feedContainer">
                        <!-- Feed items will be dynamically added here -->
                    </div>
                </section>
            </div>
            
            <!-- How It Works -->
            <section class="how-it-works">
                <h2>How It Works</h2>
                <p>BurnPool collects entry fees from participants. The jackpot increases with each entry and the hype-driven multiplier. When the round closes, a portion of the total pot is burned. The remaining is redistributed as micro-grants to random holders. Silence resets the burn ratio. Activity fuels the next round.</p>
                <a href="#" class="contract-link">Read Contract</a>
            </section>
        </div>
    </div>
    
    <!-- Wallet Connection Modal -->
    <div class="modal" id="walletModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Select Wallet</h2>
            </div>
            <div class="modal-body">
                <p>Connect your Solana wallet to participate in BurnPool.</p>
                <div class="wallet-options">
                    <div class="wallet-option" id="phantomOption">
                        <div class="wallet-icon">P</div>
                        <div class="wallet-name">Phantom</div>
                    </div>
                    <div class="wallet-option" id="solflareOption">
                        <div class="wallet-icon">S</div>
                        <div class="wallet-name">Solflare</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="pixel-button" id="closeWalletModal">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Confirm Entry</h2>
            </div>
            <div class="modal-body">
                <div class="system-message">[SYSTEM] Current ticket: <span id="modalTicketPrice">0.14 SOL</span></div>
                <div class="system-message">[SYSTEM] Hype multiplier: <span id="modalMultiplier">x1.3</span></div>
                <div class="system-message" style="margin-top: 15px;">Confirm entry?</div>
            </div>
            <div class="modal-footer">
                <button class="pixel-button" id="cancelEntry">Cancel</button>
                <button class="pixel-button" id="confirmEntry">Confirm</button>
            </div>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Entry Confirmed</h2>
            </div>
            <div class="modal-body">
                <div class="system-message">[SYSTEM] Entry confirmed.</div>
                <div class="system-message">[SYSTEM] Pool updated. Burn contribution locked.</div>
            </div>
            <div class="modal-footer">
                <button class="pixel-button" id="closeSuccessModal">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Global state variables
        let roundActive = true;
        let walletConnected = false;
        let connectedWallet = null;
        let roundEndTime = null;
        let currentRound = 42;
        let entries = 178;
        let jackpot = 42.3;
        let baseTicketPrice = 0.1;
        let currentTicketPrice = 0.14;
        let timerInterval = null;
        
        // DOM Elements
        const connectWalletBtn = document.getElementById('connectWallet');
        const enterPoolBtn = document.getElementById('enterPoolBtn');
        const walletModal = document.getElementById('walletModal');
        const phantomOption = document.getElementById('phantomOption');
        const solflareOption = document.getElementById('solflareOption');
        const closeWalletModalBtn = document.getElementById('closeWalletModal');
        const confirmationModal = document.getElementById('confirmationModal');
        const successModal = document.getElementById('successModal');
        const cancelEntryBtn = document.getElementById('cancelEntry');
        const confirmEntryBtn = document.getElementById('confirmEntry');
        const closeSuccessModalBtn = document.getElementById('closeSuccessModal');
        const timerDisplay = document.getElementById('timerDisplay');
        const roundNumberEl = document.getElementById('roundNumber');
        const entriesCountEl = document.getElementById('entriesCount');
        const jackpotAmountEl = document.getElementById('jackpotAmount');
        const ticketPriceEl = document.getElementById('ticketPrice');
        const modalTicketPrice = document.getElementById('modalTicketPrice');
        const modalMultiplier = document.getElementById('modalMultiplier');
        const feedContainer = document.getElementById('feedContainer');
        const resultSequence = document.getElementById('resultSequence');
        const roundStatusEl = document.getElementById('roundStatus');
        
        // Initialize the app
        function init() {
            // Load saved round end time or set a new one
            const savedEndTime = localStorage.getItem('burnpoolRoundEndTime');
            if (savedEndTime) {
                roundEndTime = parseInt(savedEndTime);
                // Check if the round has already ended
                if (Date.now() > roundEndTime) {
                    startNewRound();
                } else {
                    startTimer();
                }
            } else {
                // Set round end time to 5 minutes from now
                roundEndTime = Date.now() + 5 * 60 * 1000;
                localStorage.setItem('burnpoolRoundEndTime', roundEndTime.toString());
                startTimer();
            }
            
            // Populate initial feed
            generateInitialFeed();
            
            // Set up event listeners
            connectWalletBtn.addEventListener('click', openWalletModal);
            phantomOption.addEventListener('click', () => connectWallet('phantom'));
            solflareOption.addEventListener('click', () => connectWallet('solflare'));
            closeWalletModalBtn.addEventListener('click', closeWalletModal);
            enterPoolBtn.addEventListener('click', openConfirmationModal);
            cancelEntryBtn.addEventListener('click', closeConfirmationModal);
            confirmEntryBtn.addEventListener('click', confirmEntry);
            closeSuccessModalBtn.addEventListener('click', closeSuccessModal);
            
            // Check if a wallet is already connected (for demo purposes)
            checkExistingConnection();
        }
        
        // Check for existing wallet connection
        function checkExistingConnection() {
            // In a real implementation, this would check the wallet adapter state
            const savedWallet = localStorage.getItem('burnpoolConnectedWallet');
            if (savedWallet) {
                walletConnected = true;
                connectedWallet = savedWallet;
                connectWalletBtn.textContent = `Connected (${savedWallet})`;
                enterPoolBtn.disabled = false;
                addToFeed(`Wallet ${savedWallet} reconnected`);
            }
        }
        
        // Open wallet selection modal
        function openWalletModal() {
            walletModal.style.display = 'flex';
        }
        
        // Close wallet modal
        function closeWalletModal() {
            walletModal.style.display = 'none';
        }
        
        // Connect to selected wallet
        function connectWallet(walletType) {
            // In a real implementation, this would use the Solana wallet adapter
            // For this demo, we'll simulate the connection
            
            walletConnected = true;
            connectedWallet = walletType;
            connectWalletBtn.textContent = `Connected (${walletType})`;
            enterPoolBtn.disabled = false;
            
            // Save connection state
            localStorage.setItem('burnpoolConnectedWallet', walletType);
            
            // Close modal and add to feed
            closeWalletModal();
            addToFeed(`${walletType.charAt(0).toUpperCase() + walletType.slice(1)} wallet connected`);
        }
        
        // Open confirmation modal
        function openConfirmationModal() {
            if (!walletConnected) {
                openWalletModal();
                return;
            }
            
            // Update modal with current values
            modalTicketPrice.textContent = `${currentTicketPrice.toFixed(2)} SOL`;
            const multiplier = (1 + entries / 100).toFixed(1);
            modalMultiplier.textContent = `x${multiplier}`;
            
            confirmationModal.style.display = 'flex';
        }
        
        // Close confirmation modal
        function closeConfirmationModal() {
            confirmationModal.style.display = 'none';
        }
        
        // Confirm entry and process
        function confirmEntry() {
            closeConfirmationModal();
            
            // Update pool stats
            entries++;
            jackpot += currentTicketPrice;
            
            // Calculate new ticket price based on hype
            currentTicketPrice = baseTicketPrice * (1 + entries / 100);
            
            // Update UI
            updatePoolStats();
            
            // Add to feed
            addToFeed(`Wallet entered BurnPool — +${currentTicketPrice.toFixed(2)} SOL`);
            addToFeed(`Ticket price adjusted → ${currentTicketPrice.toFixed(2)} SOL`);
            addToFeed(`Current Jackpot → ${jackpot.toFixed(1)} SOL`);
            
            // Show success modal
            successModal.style.display = 'flex';
        }
        
        // Close success modal
        function closeSuccessModal() {
            successModal.style.display = 'none';
        }
        
        // Update pool statistics in UI
        function updatePoolStats() {
            roundNumberEl.textContent = currentRound.toString().padStart(3, '0');
            entriesCountEl.textContent = entries;
            jackpotAmountEl.textContent = `${jackpot.toFixed(1)} SOL`;
            ticketPriceEl.textContent = `${currentTicketPrice.toFixed(2)} SOL`;
        }
        
        // Start the countdown timer
        function startTimer() {
            clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                const now = Date.now();
                const timeLeft = roundEndTime - now;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endRound();
                    return;
                }
                
                const minutes = Math.floor(timeLeft / 60000);
                const seconds = Math.floor((timeLeft % 60000) / 1000);
                
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // End the current round and distribute rewards
        function endRound() {
            roundActive = false;
            roundStatusEl.textContent = 'COMPLETE';
            enterPoolBtn.disabled = true;
            
            // Show result sequence
            resultSequence.style.display = 'block';
            
            // Add to feed
            addToFeed('Round completed. Processing distribution...');
            
            // Simulate processing delay
            setTimeout(() => {
                // Calculate burn amount (random between 15-25%)
                const burnPercentage = 15 + Math.floor(Math.random() * 11);
                const burnAmount = (jackpot * burnPercentage / 100).toFixed(1);
                
                // Update result sequence
                resultSequence.innerHTML = `
                    <div class="system-message">[ROUND COMPLETE]</div>
                    <div class="system-message">3 wallets rewarded.</div>
                    <div class="system-message">${burnPercentage}% of jackpot burned (${burnAmount} SOL).</div>
                    <div class="system-message">New round initializing...</div>
                `;
                
                // Add to feed
                addToFeed(`${burnPercentage}% of jackpot burned (${burnAmount} SOL)`);
                addToFeed('Micro-grants distributed to 3 random wallets');
                
                // Start new round after delay
                setTimeout(startNewRound, 3000);
            }, 2000);
        }
        
        // Start a new round
        function startNewRound() {
            currentRound++;
            entries = 0;
            jackpot = 0;
            baseTicketPrice = 0.1;
            currentTicketPrice = baseTicketPrice;
            roundActive = true;
            roundStatusEl.textContent = 'ACTIVE';
            
            // Set new round end time (5 minutes from now)
            roundEndTime = Date.now() + 5 * 60 * 1000;
            localStorage.setItem('burnpoolRoundEndTime', roundEndTime.toString());
            
            // Update UI
            updatePoolStats();
            resultSequence.style.display = 'none';
            
            if (walletConnected) {
                enterPoolBtn.disabled = false;
            }
            
            // Add to feed
            addToFeed(`New round #${currentRound.toString().padStart(3, '0')} started`);
            
            // Start timer
            startTimer();
        }
        
        // Add entry to live feed
        function addToFeed(message) {
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            
            const feedItem = document.createElement('div');
            feedItem.className = 'feed-item';
            feedItem.innerHTML = `
                <span class="feed-time">[${timeString}]</span>
                <span class="feed-message">${message}</span>
            `;
            
            feedContainer.prepend(feedItem);
            
            // Limit feed to 50 items
            if (feedContainer.children.length > 50) {
                feedContainer.removeChild(feedContainer.lastChild);
            }
        }
        
        // Generate initial feed content
        function generateInitialFeed() {
            const initialMessages = [
                'System initialized. BurnPool active.',
                'Round #042 started',
                '0x9A1...F82D entered BurnPool — +0.14 SOL',
                'Ticket price adjusted → 0.15 SOL',
                '0xB72...93F0 joined — +0.15 SOL',
                'Current Jackpot → 42.3 SOL',
                '0xC45...A21E entered BurnPool — +0.15 SOL',
                'Ticket price adjusted → 0.16 SOL'
            ];
            
            initialMessages.reverse().forEach(message => {
                addToFeed(message);
            });
        }
        
        // Auto-add random entries to feed for demo purposes
        function simulateActivity() {
            if (roundActive) {
                // 20% chance to add a random entry every 10 seconds
                if (Math.random() < 0.2) {
                    setTimeout(() => {
                        if (roundActive) {
                            const walletPrefix = '0x' + Math.random().toString(16).substr(2, 3).toUpperCase();
                            const walletSuffix = Math.random().toString(16).substr(2, 4).toUpperCase();
                            addToFeed(`${walletPrefix}...${walletSuffix} entered BurnPool — +${currentTicketPrice.toFixed(2)} SOL`);
                            
                            // Update stats
                            entries++;
                            jackpot += currentTicketPrice;
                            currentTicketPrice = baseTicketPrice * (1 + entries / 100);
                            updatePoolStats();
                            
                            addToFeed(`Ticket price adjusted → ${currentTicketPrice.toFixed(2)} SOL`);
                            addToFeed(`Current Jackpot → ${jackpot.toFixed(1)} SOL`);
                        }
                    }, 10000);
                }
                
                // Schedule next activity check
                setTimeout(simulateActivity, 10000);
            } else {
                // If round not active, check again in 1 second
                setTimeout(simulateActivity, 1000);
            }
        }
        
        // Initialize the application
        init();
        
        // Start simulating activity
        simulateActivity();
    </script>
</body>

</html>
